# needsrootforbuild

Url:            http://www.suse.com/cloud
Name:           __NAME__
Summary:        %containment_image_description product .iso
Version:        __VERSION__
Release:        __RELEASE__
Group:          System/Management
License:        GPLv2
Source:         __SOURCE__
Source1:        content.key
BuildRoot:      %{_tmppath}/%{name}-%{version}-build
BuildArch:      noarch
BuildRequires:  containment-rpm-config

%define temp_mnt /mnt/iso

%description
This package installs the unpacked %containment_image_description product .iso into:

  %containment_image_dest_dir

It is intended to be installed on the SUSE Cloud admin server.

%prep
mkdir -p %temp_mnt
mount %{S:0} %temp_mnt

%build

%install
install -d -m 755 $RPM_BUILD_ROOT%containment_image_dest_dir
cp -a %temp_mnt/* $RPM_BUILD_ROOT%containment_image_dest_dir
umount %temp_mnt

# Install a working key signature
cp -p %{S:1} $RPM_BUILD_ROOT%containment_image_dest_dir

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-, root, root)
%containment_extra_files
%containment_image_dest_dir
